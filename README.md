# 동시접속 - 하이브리드 협업 프로그램

웹소켓 기반의 **CLI + GUI 하이브리드** 협업 앱입니다. 터미널의 효율성과 웹의 시각적 편의성을 결합했습니다.

## 🚀 특징
- **하이브리드 인터페이스**: CLI 명령어와 GUI를 동시에 지원
- **이중 레이아웃**: 메인(SimulSync) + 방 내부(Quiet Co-Work) 스타일
- **실시간 협업**: 웹소켓 기반 실시간 채팅 및 상태 공유
- **집중 도구**: 타이머, 목표 설정, 집중 모드 (CLI/웹 모두 지원)
- **ASCII 아트 인터페이스**: 시각적으로 아름다운 터미널 UI
- **실시간 동기화**: CLI와 웹 클라이언트 간 완벽한 실시간 동기화

## 📁 구성
```
quietcowork/
├── hybrid_server.py   # 하이브리드 서버 (CLI + 웹 지원, HTTP + WebSocket)
├── enhanced_client.py # 향상된 CLI 클라이언트 (ASCII UI, 집중모드)
├── server.py          # 기본 웹소켓 서버 (CLI 전용)
├── client.py          # 기본 CLI 클라이언트
└── __init__.py

web/
├── index.html         # 하이브리드 웹 인터페이스 (이중 레이아웃)
├── style.css          # UI 스타일 (SimulSync + Quiet Co-Work)
└── app.js            # 웹 애플리케이션 로직
```

## 🎯 실행 방법

### 1. 의존성 설치
```bash
pip install websockets
```

### 2. 하이브리드 서버 실행
```bash
python -m quietcowork.hybrid_server
```
서버가 시작되면:
- 웹소켓 서버: `ws://localhost:8766`
- 웹 인터페이스: `http://localhost:8000`

### 3-A. 웹 클라이언트 사용
브라우저에서 `http://localhost:8000` 접속
- SimulSync 메인 화면에서 방 탐색
- CLI Zone에서 명령어 입력 가능
- 방 참여 시 Quiet Co-Work 스타일로 전환

### 3-B. CLI 클라이언트 사용

#### **향상된 CLI 클라이언트 (권장)**
```bash
python -m quietcowork.enhanced_client <사용자이름> [ws://localhost:8766]
```

향상된 CLI는 다음 기능을 제공합니다:
- **ASCII 아트 인터페이스**: 78자 폭 완벽 정렬된 터미널 UI
- **실시간 채팅 표시**: 최근 채팅 5개 실시간 표시
- **참가자 목록**: 현재 방의 참가자 실시간 확인 및 안정적 관리
- **자동 방 목록**: 접속 시 메인 화면에 방 목록 자동 표시
- **색상 지원**: 터미널 색상으로 정보 구분 (메시지 타입별)
- **상태 대시보드**: 연결 상태, 시간 등 시스템 정보
- **집중 모드**: 목표 설정, 타이머, 진행률 추적

#### **기본 CLI 클라이언트**
```bash
python -m quietcowork.client <사용자이름>
```

## 🎮 사용법

### 웹 GUI 명령어 (CLI Zone)
```bash
> join study-room              # 방 참여
> create-room 새로운방         # 방 생성
> list-rooms                   # 방 목록
> help                         # 도움말
```

### 향상된 CLI 명령어

#### **메인 메뉴 (방 외부)**
```bash
참여 "방이름"      # 방에 참여
생성 "방이름"      # 새 방 생성  
상태              # 현재 상태 확인
도움말            # 도움말
종료              # 종료
```

**💡 팁**: 방 목록은 CLI 접속 시 메인 화면에 자동으로 표시됩니다!

#### **방 내부 - 기본 명령어**
```bash
참가자            # 참가자 목록
나가기            # 방 나가기
"메시지"          # 채팅 메시지 보내기
```

#### **방 내부 - 집중 모드 (CLI & 웹 지원)**
```bash
집중 --목표="React 학습" --시간=90    # 집중 모드 시작 (90분)
집중 --목표="논문 작성"               # 집중 모드 시작 (기본 25분)
목표 "새로운 목표 설정"               # 목표만 변경
상태                                 # 집중 상태 확인
휴식                                 # 휴식/집중 모드 종료
```

#### **영문 명령어 (하위 호환성)**
```bash
/join "방이름"     # 방에 참여
/create "방이름"   # 새 방 생성  
/rooms            # 방 목록 보기
/status           # 현재 상태 확인
/help             # 도움말
/exit             # 종료
```

### 집중 모드 사용 예시
```bash
# CLI에서 (한국어)
집중 --목표="컴포넌트 설계" --시간=60
# 진행 중...
상태     # 진행 상황 확인
휴식     # 휴식

# CLI에서 (영문)
/focus --goal="API 개발" --timer=45
/status
/break

# 웹에서
> focus --goal="API 개발" --timer=45
> status
> break
```

## 🎨 UI 레이아웃

### 메인 화면 (SimulSync 스타일)
```
┌──────────────────────────────────────────────┐
│                동시접속                      │
├──────────────────────────────────────────────┤
│ [작업공간] [집중모드] [친구] [설정]           │
├──────────────────────────────────────────────┤
│ 📋 방 목록                                   │
│ ● 스터디룸 (2명) - React 프로젝트            │
│                                              │
│                 ┌────────────┐               │
│                 │  CLI Zone  │               │
│                 └────────────┘               │
│  > 참여 스터디룸                             │
└──────────────────────────────────────────────┘
```

### 방 내부 (Quiet Co-Work 스타일)
```
┌─ 스터디룸 방 ────────────────────────────────────────────────────────────┐
│ 참가자 (3명): Alice, Bob, Charlie                                       │
└─────────────────────────────────────────────────────────────────────────┘

┌─ 최근 채팅 ─────────────────────────────────────────────────────────────┐
│ [14:30] Alice: CLI에서 안녕하세요!                                       │
│ [14:31] ✓ Bob joined study-room                                        │
│ [14:31] Bob: 웹에서 답장합니다!                                          │
│ [14:32] 🎯 Charlie: 집중 모드를 시작했습니다: React 공부 (60분)          │
└─────────────────────────────────────────────────────────────────────────┘

┌─ 방 명령어 ─────────────────────────────────────────────────────────────┐
│ 집중 --목표="목표" --시간=90     - 집중 모드 시작                        │
│ 휴식                             - 휴식/집중 모드 종료                   │
│ 목표 <목표>                      - 목표 설정                            │
│ 상태                             - 집중 상태 확인                         │
│ 참가자                           - 참가자 목록                            │
│ 나가기                           - 방 나가기                              │
│ <메시지>                         - 채팅 보내기                            │
└─────────────────────────────────────────────────────────────────────────┘
```

### 향상된 CLI 인터페이스
```
╔══════════════════════════════════════════════════════════════════════════╗
║                                동시접속                                  ║
║                         하이브리드 협업 프로그램                         ║
╚══════════════════════════════════════════════════════════════════════════╝

접속자: Alice
현재 방: 스터디룸
상태: 연결됨

┌─ 스터디룸 방 ───────────────────────────────────────────────────────────┐
│ 참가자 (2명): Alice, Bob                                                │
└─────────────────────────────────────────────────────────────────────────┘

┌─ 최근 채팅 ─────────────────────────────────────────────────────────────┐
│ [14:30] ⚙ 스터디룸 방에 참여했습니다.                                   │
│ [14:31] ✓ Bob joined study-room                                        │
│ [14:31] Bob: 안녕하세요!                                                │
│ [14:32] Alice: CLI에서 답장합니다                                        │
└─────────────────────────────────────────────────────────────────────────┘

┌─ 방 명령어 ─────────────────────────────────────────────────────────────┐
│ 집중 --목표="목표" --시간=90     - 집중 모드 시작                        │
│ 휴식                             - 휴식/집중 모드 종료                   │
│ 목표 <목표>                      - 목표 설정                            │
│ 상태                             - 집중 상태 확인                         │
│ 참가자                           - 참가자 목록                            │
│ 나가기                           - 방 나가기                              │
│ <메시지>                         - 채팅 보내기                            │
└─────────────────────────────────────────────────────────────────────────┘

>
```

## 🔧 주요 개선사항

### v2.0 (최신)
- ✅ **ASCII 테두리 완벽 정렬**: 78자 폭 통일로 모든 터미널에서 깔끔한 표시
- ✅ **집중 모드 CLI 지원**: CLI에서도 완전한 집중 모드 기능 제공
- ✅ **참가자 목록 안정화**: "Successfully" 파싱 버그 수정 및 안정적 관리
- ✅ **실시간 동기화 강화**: CLI↔웹 간 완벽한 실시간 동기화
- ✅ **메시지 타입별 색상**: 참여/퇴장/시스템 메시지 구분 표시
- ✅ **하이브리드 서버**: HTTP + WebSocket 통합 서버 구조

### v1.0
- ✅ **기본 하이브리드 구조**: CLI + 웹 동시 지원
- ✅ **이중 레이아웃**: SimulSync + Quiet Co-Work 스타일
- ✅ **실시간 채팅**: 웹소켓 기반 메시징

## 🔄 호환성
- **완벽한 크로스 플랫폼**: CLI 클라이언트와 웹 클라이언트가 같은 서버에서 동시 작동
- **실시간 동기화**: 모든 기능이 CLI↔웹 간 실시간으로 동기화
- **안정적 연결**: Codespace 및 다양한 네트워크 환경 지원

## 📋 체크리스트

### 완료된 기능 ✅
- [x] 하이브리드 서버 (HTTP + WebSocket)
- [x] 향상된 CLI 클라이언트 (ASCII UI)
- [x] 웹 GUI (이중 레이아웃)
- [x] 실시간 채팅
- [x] 방 관리 시스템
- [x] 집중 모드 (CLI & 웹)
- [x] 참가자 관리
- [x] ASCII 테두리 정렬
- [x] 메시지 타입별 색상 코딩
- [x] 실시간 동기화
- [x] 한국어 명령어 지원
- [x] 방 검증 및 오류 메시지 개선

### 🚧 개발 예정 - GUI 메뉴 시스템

#### 1. Workspaces 메뉴
- [ ] **방 목록/검색**: "Quiet Room", "Coding Room" 등 현재 이용 가능한 워크스페이스 목록과 사용 인원 표시
- [ ] **새 방 만들기**: 주제나 목표, 타이머 설정 등 방 세부 정보 입력 후 생성
- [ ] **상세 정보 패널**: 해당 방의 목적, 참가자, 최근 활동 로그 등을 확인
- [ ] **빠른 참여**: 실시간 추천 방이나 최근 방문 방을 한눈에 보고 바로 입장

#### 2. Focus Mode 메뉴
- [ ] **집중 단계 설정**: Deep Focus, Social Focus 등 상황별 모드 선택
- [ ] **타이머 관리**: Pomodoro나 지정 시간 집중을 위한 타이머 시작/일시중지/종료
- [ ] **알림 최소화**: 모드에 따라 알림 차단, 채팅 가리기 등 집중을 돕는 옵션
- [ ] **환경음/배경 설정**: 집중도에 맞는 앰비언트 사운드나 테마 적용

#### 3. Friends 메뉴
- [ ] **친구 목록**: 현재 접속 상태(온라인/집중 중/오프라인 등)와 함께 표시
- [ ] **초대 기능**: 특정 워크스페이스나 그룹 세션에 친구 초대
- [ ] **직접 메시지/메모**: 가벼운 대화나 협업 용도의 짧은 메모 남기기
- [ ] **친구 찾기/관리**: 검색, 차단/해제, 즐겨찾기 기능 등

#### 4. Settings 메뉴
- [ ] **테마와 인터페이스**: 밝기/어둠 모드 전환, 고대비 등 접근성 관련 설정
- [ ] **알림/음성/사운드**: 알림 빈도, 소리 크기, 음성 안내 활성화 등
- [ ] **언어/지역 설정**: CLI 명령어와 GUI 언어 선택
- [ ] **계정 및 통합**: 로그인 정보, 캘린더·외부 서비스 연동, 명령어 단축키 등 세부 설정

이 프로젝트는 효율적인 협업을 위한 CLI의 강력함과 직관적인 웹 UI의 장점을 결합한 혁신적인 하이브리드 접근 방식을 보여줍니다.
