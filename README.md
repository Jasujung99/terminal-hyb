# 동시접속 - 하이브리드 협업 프로그램

웹소켓 기반의 **CLI + GUI 하이브리드** 협업 앱입니다. 터미널의 효율성과 웹의 시각적 편의성을 결합했습니다.

## 🚀 특징
- **하이브리드 인터페이스**: CLI 명령어와 GUI를 동시에 지원
- **이중 레이아웃**: 메인(SimulSync) + 방 내부(Quiet Co-Work) 스타일
- **실시간 협업**: 웹소켓 기반 실시간 채팅 및 상태 공유
- **집중 도구**: 타이머, 목표 설정, 집중 모드 (CLI/웹 모두 지원)
- **ASCII 아트 인터페이스**: 시각적으로 아름다운 터미널 UI
- **실시간 동기화**: CLI와 웹 클라이언트 간 완벽한 실시간 동기화

## 📁 구성
```
quietcowork/
├── hybrid_server.py   # 하이브리드 서버 (CLI + 웹 지원, HTTP + WebSocket)
├── enhanced_client.py # 향상된 CLI 클라이언트 (ASCII UI, 집중모드)
├── server.py          # 기본 웹소켓 서버 (CLI 전용)
├── client.py          # 기본 CLI 클라이언트
└── __init__.py

web/
├── index.html         # 하이브리드 웹 인터페이스 (이중 레이아웃)
├── style.css          # UI 스타일 (SimulSync + Quiet Co-Work)
└── app.js            # 웹 애플리케이션 로직
```

## 🎯 실행 방법

### 1. 의존성 설치
```bash
pip install websockets
```

### 2. 하이브리드 서버 실행
```bash
python -m quietcowork.hybrid_server
```
서버가 시작되면:
- 웹소켓 서버: `ws://localhost:8766`
- 웹 인터페이스: `http://localhost:8000`

### 3-A. 웹 클라이언트 사용
브라우저에서 `http://localhost:8000` 접속
- SimulSync 메인 화면에서 방 탐색
- CLI Zone에서 명령어 입력 가능
- 방 참여 시 Quiet Co-Work 스타일로 전환

### 3-B. CLI 클라이언트 사용

#### **향상된 CLI 클라이언트 (권장)**
```bash
python -m quietcowork.enhanced_client <사용자이름> [ws://localhost:8766]
```

향상된 CLI는 다음 기능을 제공합니다:
- **ASCII 아트 인터페이스**: 78자 폭 완벽 정렬된 터미널 UI
- **실시간 채팅 표시**: 최근 채팅 5개 실시간 표시
- **참가자 목록**: 현재 방의 참가자 실시간 확인 및 안정적 관리
- **방 목록**: 사용 가능한 방과 참가자 수 표시
- **색상 지원**: 터미널 색상으로 정보 구분 (메시지 타입별)
- **상태 대시보드**: 연결 상태, 시간 등 시스템 정보
- **집중 모드**: 목표 설정, 타이머, 진행률 추적

#### **기본 CLI 클라이언트**
```bash
python -m quietcowork.client <사용자이름>
```

## 🎮 사용법

### 웹 GUI 명령어 (CLI Zone)
```bash
> join study-room              # 방 참여
> create-room 새로운방         # 방 생성
> list-rooms                   # 방 목록
> help                         # 도움말
```

### 향상된 CLI 명령어

#### **메인 메뉴 (방 외부)**
```bash
참여 <방이름>      # 방에 참여
생성 <방이름>      # 새 방 생성  
방목록            # 방 목록 보기
상태              # 현재 상태 확인
도움말            # 도움말
종료              # 종료
```

#### **방 내부 - 기본 명령어**
```bash
참가자            # 참가자 목록
나가기            # 방 나가기
<메시지>          # 채팅 메시지 보내기
```

#### **방 내부 - 집중 모드 (CLI & 웹 지원)**
```bash
집중 --목표="React 학습" --시간=90    # 집중 모드 시작 (90분)
집중 --목표="논문 작성"               # 집중 모드 시작 (기본 25분)
목표 새로운 목표 설정                 # 목표만 변경
상태                                 # 집중 상태 확인
휴식                                 # 휴식/집중 모드 종료
```

#### **영문 명령어 (하위 호환성)**
```bash
/join <방이름>     # 방에 참여
/create <방이름>   # 새 방 생성  
/rooms            # 방 목록 보기
/status           # 현재 상태 확인
/help             # 도움말
/exit             # 종료
```

### 집중 모드 사용 예시
```bash
# CLI에서 (한국어)
집중 --목표="컴포넌트 설계" --시간=60
# 진행 중...
상태     # 진행 상황 확인
휴식     # 휴식

# CLI에서 (영문)
/focus --goal="API 개발" --timer=45
/status
/break

# 웹에서
> focus --goal="API 개발" --timer=45
> status
> break
```

## 🎨 UI 레이아웃

### 메인 화면 (SimulSync 스타일)
```
┌──────────────────────────────────────────────┐
│                동시접속                      │
├──────────────────────────────────────────────┤
│ [작업공간] [집중모드] [친구] [설정]           │
├──────────────────────────────────────────────┤
│ 📋 방 목록                                   │
│ ● 스터디룸 (2명) - React 프로젝트            │
│                                              │
│                 ┌────────────┐               │
│                 │  CLI Zone  │               │
│                 └────────────┘               │
│  > 참여 스터디룸                             │
└──────────────────────────────────────────────┘
```

### 방 내부 (Quiet Co-Work 스타일)
```
┌─ 스터디룸 방 ────────────────────────────────────────────────────────────┐
│ 참가자 (3명): Alice, Bob, Charlie                                       │
└─────────────────────────────────────────────────────────────────────────┘

┌─ 최근 채팅 ─────────────────────────────────────────────────────────────┐
│ [14:30] Alice: CLI에서 안녕하세요!                                       │
│ [14:31] ✓ Bob joined study-room                                        │
│ [14:31] Bob: 웹에서 답장합니다!                                          │
│ [14:32] 🎯 Charlie: 집중 모드를 시작했습니다: React 공부 (60분)          │
└─────────────────────────────────────────────────────────────────────────┘

┌─ 방 명령어 ─────────────────────────────────────────────────────────────┐
│ 집중 --목표="목표" --시간=90     - 집중 모드 시작                        │
│ 휴식                             - 휴식/집중 모드 종료                   │
│ 목표 <목표>                      - 목표 설정                            │
│ 상태                             - 집중 상태 확인                         │
│ 참가자                           - 참가자 목록                            │
│ 나가기                           - 방 나가기                              │
│ <메시지>                         - 채팅 보내기                            │
└─────────────────────────────────────────────────────────────────────────┘
```

### 향상된 CLI 인터페이스
```
╔══════════════════════════════════════════════════════════════════════════╗
║                        동시접속 (SimulSync)                             ║
║                    CLI + GUI 하이브리드 협업 앱                          ║
╚══════════════════════════════════════════════════════════════════════════╝

접속자: Alice
현재 방: study-room
상태: 연결됨

┌─ study-room 방 ─────────────────────────────────────────────────────────┐
│ 참가자 (2명): Alice, Bob                                                │
└─────────────────────────────────────────────────────────────────────────┘

┌─ 최근 채팅 ─────────────────────────────────────────────────────────────┐
│ [14:30] ⚙ study-room 방에 참여했습니다.                                 │
│ [14:31] ✓ Bob joined study-room                                        │
│ [14:31] Bob: 안녕하세요!                                                │
│ [14:32] Alice: CLI에서 답장합니다                                        │
└─────────────────────────────────────────────────────────────────────────┘

┌─ 방 명령어 ─────────────────────────────────────────────────────────────┐
│ /focus --goal="목표" --timer=90 - 집중 모드 시작                        │
│ /break                          - 휴식/집중 모드 종료                   │
│ /goal <목표>                   - 목표 설정                             │
│ /status                       - 집중 상태 확인                         │
│ /participants                  - 참가자 목록                            │
│ /leave                         - 방 나가기                              │
│ <메시지>                       - 채팅 보내기                            │
└─────────────────────────────────────────────────────────────────────────┘

>
```

## 🔧 주요 개선사항

### v2.0 (최신)
- ✅ **ASCII 테두리 완벽 정렬**: 78자 폭 통일로 모든 터미널에서 깔끔한 표시
- ✅ **집중 모드 CLI 지원**: CLI에서도 완전한 집중 모드 기능 제공
- ✅ **참가자 목록 안정화**: "Successfully" 파싱 버그 수정 및 안정적 관리
- ✅ **실시간 동기화 강화**: CLI↔웹 간 완벽한 실시간 동기화
- ✅ **메시지 타입별 색상**: 참여/퇴장/시스템 메시지 구분 표시
- ✅ **하이브리드 서버**: HTTP + WebSocket 통합 서버 구조

### v1.0
- ✅ **기본 하이브리드 구조**: CLI + 웹 동시 지원
- ✅ **이중 레이아웃**: SimulSync + Quiet Co-Work 스타일
- ✅ **실시간 채팅**: 웹소켓 기반 메시징

## 🔄 호환성
- **완벽한 크로스 플랫폼**: CLI 클라이언트와 웹 클라이언트가 같은 서버에서 동시 작동
- **실시간 동기화**: 모든 기능이 CLI↔웹 간 실시간으로 동기화
- **안정적 연결**: Codespace 및 다양한 네트워크 환경 지원

## 📋 체크리스트

### 완료된 기능 ✅
- [x] 하이브리드 서버 (HTTP + WebSocket)
- [x] 향상된 CLI 클라이언트 (ASCII UI)
- [x] 웹 GUI (이중 레이아웃)
- [x] 실시간 채팅
- [x] 방 관리 시스템
- [x] 집중 모드 (CLI & 웹)
- [x] 참가자 관리
- [x] ASCII 테두리 정렬
- [x] 메시지 타입별 색상 코딩
- [x] 실시간 동기화

이 프로젝트는 효율적인 협업을 위한 CLI의 강력함과 직관적인 웹 UI의 장점을 결합한 혁신적인 하이브리드 접근 방식을 보여줍니다.
